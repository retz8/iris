# IRIS Debug Report

**File:** `main.js`  
**Language:** `javascript`  
**Execution Path:** üîÑ Two-Stage (Identification + Analysis)  
**Status:** ‚ùå POOR ![Two-Stage](https://img.shields.io/badge/Execution-Two--Stage-green)

---

## Transformation Pipeline Visualization

### Stage 1: Original Source Code

**Total Lines:** 1154  
**Size:** 34,674 bytes

```javascript
import * as THREE from "three";
import { PLYLoader } from "three/examples/jsm/loaders/PLYLoader.js";
import { OBJExporter } from "three/examples/jsm/exporters/OBJExporter.js";
import rotatingFrameTransformation from "./rotation_of_the_frame.js";

// modeling modules
import { createGUIWithAnth } from "./modules/guiManager.js";
import { createManualWheelchair } from "./modules/manualWheelchair.js";
import { createPoweredWheelchair } from "./modules/poweredWheelchair.js";

// side modules
import Li...(truncated)
```

### Stage 2: Full AST (Before Compression)

**Total Nodes:** 3657  
**Structure:** Complete Tree-sitter parse tree

**Key Characteristics:**
- All implementation details are present
- Nested bodies and statements fully expanded
- Comprehensive but verbose JSON structure
- Ready for detailed analysis but heavy for transmission

```json
{
  "type": "root",
  "children": [
    {
      "type": "declaration",
      "children": [
        { "type": "identifier", "value": "..." },
        { "type": "body", "children": [
          { "type": "statement", "children": [...] },
          { "type": "statement", "children": [...] }
        ] }
      ]
    },
    { "type": "declaration", "children": [...] },
    { "type": "statement", "children": [...] }
  ]
}
```

### Stage 3: Shallow AST (After Compression)

**Total Nodes:** 424  
**Compression:** 8.62x reduction  
**Size:** 46,828 bytes

**Key Characteristics:**
- Implementation bodies collapsed to `line_range` references
- Function signatures and declarations preserved
- Comments extracted and attached to nodes
- Lightweight JSON for semantic analysis

```json
{
  "type": "module/program",
  "children": [
    {
      "type": "function_declaration",
      "name": "exampleFunction",
      "line_range": [10, 25],
      "leading_comment": "// Documentation...",
      "children": [...]
    },
    {
      "type": "class_declaration",
      "name": "ExampleClass",
      "line_range": [27, 50],
      "fields": {
        "methods": [
          {
            "type": "method_definition",
            "name": "exampleMethod",
            "line_range": [30, 40]
          }
        ]
      }
    }
  ]
}
```

### Transformation Summary

| Stage | Nodes | Size | Purpose |
|-------|-------|------|---------|
| Full AST | 3657 | 34,674B | Complete parse tree |
| Shallow AST | 424 | 46,828B | Semantic analysis |
| **Reduction** | **8.62x** | **0.74x** | **Efficiency gain** |

---

## Compression Metrics (AST Transformation)

| Metric | Value |
|--------|-------|
| Node Reduction Ratio | 8.62x |
| Context Compression Ratio | 0.74x |
| Comment Retention Score | 91.3% |
| Full AST Nodes | 3657 |
| Shallow AST Nodes | 424 |
| Full AST Estimated Tokens | 12,799 |
| Shallow AST Estimated Tokens | 1,484 |
| Source Bytes | 34,674 |
| JSON Bytes | 46,828 |

---

## LLM Processing Metrics

### üîÑ Two-Stage Execution

Multi-stage analysis: Identification ‚Üí Source Reading ‚Üí Analysis.

#### Summary

| Metric | Value |
|--------|-------|
| Total Input Tokens | 30,592 |
| Total Output Tokens | 2,227 |
| Total Tokens | 32,819 |
| Total Time | 45.80s |
| Stages | 2 |

#### Stage Details

**Stage 1 Identification**

| Metric | Value |
|--------|-------|
| Input Tokens | 11,711 |
| Output Tokens | 1,445 |
| Total Tokens | 13,156 |
| Time | 29.10s |

<details>
<summary><strong>üìÑ Full LLM Response</strong> (click to expand)</summary>

```json
```json
{
  "ranges_to_read": [
    {
      "start_line": 13,
      "end_line": 17,
      "reason": "Import statement has unclear purpose, need to see actual value",
      "element_type": "import_statement",
      "element_name": "import"
    },
    {
      "start_line": 25,
      "end_line": 30,
      "reason": "Import statement has unclear purpose, need to see actual value",
      "element_type": "import_statement",
      "element_name": "import"
    },
    {
      "start_line": 34,
      "end_line": 38,
      "reason": "Import statement has unclear purpose, need to see actual value",
      "element_type": "import_statement",
      "element_name": "import"
    },
    {
      "start_line": 68,
      "end_line": 72,
      "reason": "Variable 'humanRotation' has unclear purpose due to extra children",
      "element_type": "variable",
      "element_name": "humanRotation"
    },
    {
      "start_line": 79,
      "end_line": 293,
      "reason": "Variable 'anth' has unclear purpose due to extra children",
      "element_type": "variable",
      "element_name": "anth"
    },
    {
      "start_line": 296,
      "end_line": 304,
      "reason": "Variable 'gui' has unclear purpose due to extra children",
      "element_type": "variable",
      "element_name": "gui"
    },
    {
      "start_line": 368,
      "end_line": 388,
      "reason": "Function 'calculateOptimalWheelchairParams' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "calculateOptimalWheelchairParams"
    },
    {
      "start_line": 393,
      "end_line": 409,
      "reason": "Function 'validateWheelchairParams' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "validateWheelchairParams"
    },
    {
      "start_line": 418,
      "end_line": 452,
      "reason": "Function 'updateWheelchairParams' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "updateWheelchairParams"
    },
    {
      "start_line": 475,
      "end_line": 562,
      "reason": "Function 'loadHumanModel' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "loadHumanModel"
    },
    {
      "start_line": 582,
      "end_line": 641,
      "reason": "Function 'updateHumanGeometry' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "updateHumanGeometry"
    },
    {
      "start_line": 646,
      "end_line": 687,
      "reason": "Function 'calculateHumanPositionOnWheelchair' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "calculateHumanPositionOnWheelchair"
    },
    {
      "start_line": 698,
      "end_line": 711,
      "reason": "Function 'measureBackGap' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "measureBackGap"
    },
    {
      "start_line": 716,
      "end_line": 734,
      "reason": "Function 'measureThighCushionOverlap' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "measureThighCushionOverlap"
    },
    {
      "start_line": 739,
      "end_line": 757,
      "reason": "Function 'measureCalfCushionOverlap' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "measureCalfCushionOverlap"
    },
    {
      "start_line": 765,
      "end_line": 804,
      "reason": "Function 'optimizeHumanAlignment' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "optimizeHumanAlignment"
    },
    {
      "start_line": 809,
      "end_line": 838,
      "reason": "Function 'updateHumanGeometryFromWheelchair' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "updateHumanGeometryFromWheelchair"
    },
    {
      "start_line": 848,
      "end_line": 870,
      "reason": "Function 'loadWheelchairModel' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "loadWheelchairModel"
    },
    {
      "start_line": 878,
      "end_line": 894,
      "reason": "Function 'updateWheelchairGeometry' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "updateWheelchairGeometry"
    },
    {
      "start_line": 900,
      "end_line": 911,
      "reason": "Function 'createWheelchairMesh' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "createWheelchairMesh"
    },
    {
      "start_line": 916,
      "end_line": 937,
      "reason": "Function 'updateWheelchairMesh' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "updateWheelchairMesh"
    },
    {
      "start_line": 943,
      "end_line": 978,
      "reason": "Function 'setWheelchairParams' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "setWheelchairParams"
    },
    {
      "start_line": 983,
      "end_line": 1015,
      "reason": "Function 'loadHumanAndWheelchairModels' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "loadHumanAndWheelchairModels"
    },
    {
      "start_line": 1020,
      "end_line": 1033,
      "reason": "Function 'init' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "init"
    },
    {
      "start_line": 1036,
      "end_line": 1145,
      "reason": "Function 'animate' has unclear purpose due to extra children",
      "element_type": "function",
      "element_name": "animate"
    }
  ]
}
```
```

</details>

**Stage 2 Analysis**

| Metric | Value |
|--------|-------|
| Input Tokens | 18,881 |
| Output Tokens | 782 |
| Total Tokens | 19,663 |
| Time | 16.70s |

<details>
<summary><strong>üìÑ Full LLM Response</strong> (click to expand)</summary>

```json
{
  "file_intent": "3D modeling and simulation of human and wheelchair interactions for ergonomic analysis.",
  "responsibilities": [
    {
      "id": "human-model-loading",
      "label": "Human Model Loading",
      "description": "Loads and initializes the human model in the 3D scene with appropriate parameters.",
      "elements": {
        "functions": ["loadHumanModel", "updateHumanGeometry"],
        "state": ["humanMesh", "humanGeometry", "humanMaterial", "humanRotation"],
        "imports": ["PLYLoader from three"],
        "types": [],
        "constants": []
      },
      "ranges": [[475, 562], [582, 641]]
    },
    {
      "id": "wheelchair-model-loading",
      "label": "Wheelchair Model Loading",
      "description": "Loads and initializes the wheelchair model in the 3D scene with specified parameters.",
      "elements": {
        "functions": ["loadWheelchairModel", "updateWheelchairGeometry"],
        "state": ["wheelchairMesh", "wheelchairGeometry", "wheelchairMaterial", "wheelchairRotation"],
        "imports": [],
        "types": [],
        "constants": []
      },
      "ranges": [[848, 870], [878, 894]]
    },
    {
      "id": "parameter-calculation",
      "label": "Parameter Calculation",
      "description": "Calculates optimal parameters for wheelchair based on human dimensions and constraints.",
      "elements": {
        "functions": ["calculateOptimalWheelchairParams", "validateWheelchairParams", "updateWheelchairParams"],
        "state": ["wheelchairParams", "wheelchairType"],
        "imports": [],
        "types": [],
        "constants": []
      },
      "ranges": [[368, 388], [393, 409], [418, 452]]
    },
    {
      "id": "alignment-optimization",
      "label": "Alignment Optimization",
      "description": "Optimizes the alignment of the human model on the wheelchair to ensure ergonomic fit.",
      "elements": {
        "functions": ["optimizeHumanAlignment", "measureBackGap", "measureThighCushionOverlap", "measureCalfCushionOverlap"],
        "state": [],
        "imports": [],
        "types": [],
        "constants": []
      },
      "ranges": [[765, 804], [698, 711], [716, 734], [739, 757]]
    },
    {
      "id": "gui-setup",
      "label": "GUI Setup",
      "description": "Creates and manages the GUI for user interaction with human and wheelchair parameters.",
      "elements": {
        "functions": ["createGUIWithAnth"],
        "state": ["gui"],
        "imports": [],
        "types": [],
        "constants": []
      },
      "ranges": [[296, 304]]
    },
    {
      "id": "animation-loop",
      "label": "Animation Loop",
      "description": "Handles the animation loop for rendering the 3D scene and updating models based on user input.",
      "elements": {
        "functions": ["animate"],
        "state": ["humanParameterChanged", "wheelchairParameterChanged"],
        "imports": [],
        "types": [],
        "constants": []
      },
      "ranges": [[1036, 1145]]
    }
  ],
  "metadata": {
    "notes": "This file integrates various components for modeling and simulating human-wheelchair interactions."
  }
}
```

</details>

---

## Integrity Verification

**Integrity Score:** `57.6%`

**Checks:** 57/99 passed

### ‚ö†Ô∏è Quality Warning

Integrity score is below 100%. Some structural elements may not have been fully verified.

---

*Report generated for IRIS AST transformation analysis*