# IRIS Debug Report

**File:** `main.js`  
**Language:** `javascript`  
**Execution Path:** ðŸ”§ Tool-Calling (Single-Stage with Dynamic Source Reading)  

---

## Source Code Overview

### Stage 1: Original Source Code

*Source code not available in snapshots*

### Signature Graph Snapshot

**Entities:** 42

```json
{
  "entities": [
    {
      "id": "entity_0",
      "name": "* as THREE",
      "type": "import",
      "signature": "import * as THREE from \"three\";",
      "line_range": [
        1,
        1
      ],
      "depth": 0,
      "scope": "module",
      "parent_id": null,
      "children_ids": [],
      "calls": [],
      "leading_comment": null,
      "inline_comment": null,
      "trailing_comment": null,
      "docstring": null
    },
    {
      "id": "entity_1",
      "name": "{ PLYLoader }",
      "type": "import",
      "signature": "import { PLYLoader } from \"three/examples/jsm/loaders/PLYLoader.js\";",
      "line_range": [
        2,
        2
      ],
      "depth": 0,
      "scope": "module",
      "parent_id": null,
      "children_ids": [],
      "calls": [],
      "leading_comment": null,
      "inline_comment": null,
      "trailing_comment": null,
      "docstring": null
    },
    {
      "id": "entity_2",
      "name": "{ OBJExporter }",
      "type": "import",
      "signature": "import { OBJExporter } from \"three/examples/jsm/exporters/OBJExporter.js\";",
      "line_range": [
        3,
        3
      ],
      "depth": 0,
      "scope": "module",
      "parent_id": null,
      "children_ids": [],
      "calls": [],
      "leading_comment": null,
      "inline_comment": null,
      "trailing_comment": null,
      "docstring": null
    },
    {
      "id": "entity_3",
      "name": "rotatingFrameTransformation",
      "type": "import",
      "signature": "import rotatingFrameTransformation from \"./rotation_of_the_frame.js\";",
      "line_range": [
        4,
        4
      ],
      "depth": 0,
      "scope": "module",
      "parent_id": null,
      "children_ids": [],
      "calls": [],
      "leading_comment": null,
      "inline_comment": null,
      "trailing_comment": null,
      "docstring": null
    },
    {
      "id": "entity_4",
      "name": "{ createGUIWithAnth }",
      "type": "import",
  ...(truncated for readability)
```

---

## LLM Processing Metrics

### ðŸ”§ Tool-Calling Execution

Single-stage analysis with dynamic source reading: LLM analyzes shallow AST and calls `refer_to_source_code()` tool when needed.

#### Summary

| Metric | Value |
|--------|-------|
| Total Input Tokens | 6,813 |
| Total Output Tokens | 613 |
| Total Tokens | 7,426 |
| Total Time | 13.43s |
| Stages | 1 |

#### Stage Details

**Tool Calling Analysis**

| Metric | Value |
|--------|-------|
| Input Tokens | 6,813 |
| Output Tokens | 613 |
| Total Tokens | 7,426 |
| Time | 13.43s |

**Throughput:**

- Tokens/Second: 552.9 tok/s
- Input: 6,813 tok | Output: 613 tok | Total: 7,426 tok

<details>
<summary><strong>ðŸ“„ Full LLM Response</strong> (click to expand)</summary>

```json
Based on the provided information from the `main.js` file, here are the extracted **File Intent** and **Responsibility Blocks**:

### File Intent
The primary intent of the `main.js` file is to manage the loading and manipulation of 3D models (specifically human and wheelchair models) using the Three.js library. It includes functionalities for calculating optimal wheelchair parameters based on human dimensions, updating the geometry of the models, and rendering them in a scene.

### Responsibility Blocks

1. **Imports**
   - The file imports various modules and components necessary for its functionality, including loaders, exporters, GUI management, utility functions, and model management.

2. **Model Loading Functions**
   - **`loadHumanModel`**: Loads a human model from a specified file and sets its initial position and properties.
   - **`loadWheelchairModel`**: Loads a wheelchair model and sets its initial properties.
   - **`loadHumanAndWheelchairModels`**: Coordinates the loading of both human and wheelchair models.

3. **Parameter Calculation Functions**
   - **`calculateOptimalSeatWidth`**: Calculates the optimal seat width based on human thigh width.
   - **`calculateOptimalBackHeight`**: Determines the optimal back height based on shoulder height.
   - **`calculateOptimalWheelchairParams`**: Main function to calculate optimal parameters for the wheelchair based on human dimensions.

4. **Validation and Update Functions**
   - **`validateWheelchairParams`**: Validates that the wheelchair parameters are within reasonable ranges.
   - **`updateWheelchairParams`**: Updates global wheelchair parameters based on new input.
   - **`refreshGUIWheelchairParams`**: Updates the GUI with the latest wheelchair parameters.

5. **Geometry Update Functions**
   - **`updateHumanGeometry`**: Updates the human model's geometry based on parameters.
   - **`updateWheelchairGeometry`**: Updates the wheelchair's geometry and properties.
   - **`updateHumanGeometryFromWheelchair`**: Updates the human model based on changes to the wheelchair.

6. **Position Calculation Functions**
   - **`calculateHumanPositionOnWheelchair`**: Calculates the position of the human model on the wheelchair.
   - **`measureBackGap`**: Measures the gap between the human's back and the wheelchair's backrest.
   - **`measureThighCushionOverlap`**: Measures the overlap between the human's thigh and the wheelchair cushion.

7. **Animation and Rendering**
   - **`animate`**: Handles the animation loop, rendering the scene and updating the models.

8. **Initialization**
   - **`init`**: Initializes the application, setting up the scene and loading models.

### Summary
The `main.js` file serves as a central hub for managing 3D models related to wheelchairs and human figures, focusing on loading, updating, and rendering these models while ensuring that the parameters are optimized for usability.
```

</details>

---

*Report generated for IRIS AST transformation analysis*