{
  "filename": "prompts.py",
  "language": "python",
  "signature_graph": {
    "entities": [
      {
        "id": "entity_0",
        "name": "json",
        "type": "import",
        "signature": "import json",
        "line_range": [
          17,
          17
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [],
        "calls": [],
        "leading_comment": null,
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_1",
        "name": "from typing import Any, Dict",
        "type": "import",
        "signature": "from typing import Any, Dict",
        "line_range": [
          18,
          18
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [],
        "calls": [],
        "leading_comment": null,
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_2",
        "name": "build_tool_calling_prompt",
        "type": "function",
        "signature": "def build_tool_calling_prompt(\n    filename: str,\n    language: str,\n    shallow_ast: Dict[str, Any],\n) -> str",
        "line_range": [
          378,
          398
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [],
        "calls": [],
        "leading_comment": "# =============================================================================\n# TOOL-CALLING: SINGLE-STAGE ANALYSIS WITH SOURCE CODE ACCESS\n# =============================================================================",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": "\"\"\"Build prompt for tool-calling single-stage analysis.\n\n    Includes analysis strategy to guide top-down comprehension, including\n    nested container structure support when present in the Shallow AST.\n    \"\"\""
      },
      {
        "id": "entity_3",
        "name": "build_identification_prompt",
        "type": "function",
        "signature": "def build_identification_prompt(\n    filename: str, language: str, shallow_ast: Dict[str, Any]\n) -> str",
        "line_range": [
          511,
          545
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [],
        "calls": [],
        "leading_comment": "# =============================================================================\n# STAGE 1: IDENTIFICATION - Find unclear parts that need source code reading\n# =============================================================================",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": "\"\"\"Build Stage 1 prompt to identify unclear parts.\"\"\""
      },
      {
        "id": "entity_4",
        "name": "build_analysis_prompt",
        "type": "function",
        "signature": "def build_analysis_prompt(\n    filename: str,\n    language: str,\n    shallow_ast: Dict[str, Any],\n    source_snippets: Dict[str, str],\n) -> str",
        "line_range": [
          668,
          704
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [],
        "calls": [],
        "leading_comment": "# =============================================================================\n# STAGE 2: ANALYSIS - Generate File Intent + Responsibility Blocks\n# =============================================================================",
        "inline_comment": null,
        "trailing_comment": "# Format source snippets for readability",
        "docstring": "\"\"\"Build Stage 2 prompt with AST + read source code.\"\"\""
      },
      {
        "id": "entity_5",
        "name": "build_fast_path_prompt",
        "type": "function",
        "signature": "def build_fast_path_prompt(\n    filename: str,\n    language: str,\n    shallow_ast: Dict[str, Any],\n    source_code: str,\n) -> str",
        "line_range": [
          788,
          809
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [],
        "calls": [],
        "leading_comment": "# =============================================================================\n# FAST-PATH: SINGLE-STAGE ANALYSIS - For small files with full source code\n# =============================================================================",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": "\"\"\"Build fast-path prompt with full source code and AST.\n\n    Used when file is small enough to analyze in a single LLM pass.\n    \"\"\""
      },
      {
        "id": "entity_6",
        "name": "build_raw_source_prompt",
        "type": "function",
        "signature": "def build_raw_source_prompt(\n    filename: str,\n    language: str,\n    source_code: str,\n) -> str",
        "line_range": [
          812,
          838
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [],
        "calls": [],
        "leading_comment": null,
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": "\"\"\"Build prompt using only raw source code (no AST).\n\n    Used for performance comparison testing.\n    \"\"\""
      },
      {
        "id": "entity_7",
        "name": "get_hub_detection_patterns",
        "type": "function",
        "signature": "def get_hub_detection_patterns() -> Dict[str, list]",
        "line_range": [
          846,
          878
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [],
        "calls": [],
        "leading_comment": "# =============================================================================\n# ADDITIONAL UTILITIES\n# =============================================================================",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": "\"\"\"Return patterns that indicate hub objects in different languages.\n\n    Useful for AST pre-processing or prompt customization.\n    \"\"\""
      },
      {
        "id": "entity_8",
        "name": "get_responsibility_templates",
        "type": "function",
        "signature": "def get_responsibility_templates() -> Dict[str, Dict[str, Any]]",
        "line_range": [
          881,
          944
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [],
        "calls": [],
        "leading_comment": null,
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": "\"\"\"Return common responsibility block templates.\n\n    Useful for guiding LLM output or validation.\n    \"\"\""
      }
    ]
  }
}