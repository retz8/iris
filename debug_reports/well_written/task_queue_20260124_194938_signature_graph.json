{
  "filename": "task_queue.js",
  "language": "javascript",
  "signature_graph": {
    "entities": [
      {
        "id": "entity_0",
        "name": "Task",
        "type": "class",
        "signature": "class Task",
        "line_range": [
          14,
          41
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [
          "entity_1",
          "entity_2"
        ],
        "calls": [],
        "leading_comment": "/**\n * Priority Task Queue\n * \n * Manages asynchronous tasks with priority levels, concurrency limits,\n * and automatic retry logic for failed tasks.\n */\n// Priority levels for task scheduling",
        "inline_comment": null,
        "trailing_comment": "/**\n   * Create a new task with priority and retry configuration\n   * @param {Function} taskFunction - Async function to execute\n   * @param {number} priority - Priority level (0 = highest)\n   * @param {number} maxRetries - Maximum retry attempts on failure\n   */",
        "docstring": null
      },
      {
        "id": "entity_1",
        "name": "constructor",
        "type": "method",
        "signature": "constructor(taskFunction, priority = PRIORITY_NORMAL, maxRetries = 3)",
        "line_range": [
          21,
          31
        ],
        "depth": 1,
        "scope": "class",
        "parent_id": "entity_0",
        "children_ids": [],
        "calls": [
          "Date.now",
          "Task._generateTaskId"
        ],
        "leading_comment": null,
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_2",
        "name": "_generateTaskId",
        "type": "method",
        "signature": "_generateTaskId()",
        "line_range": [
          38,
          40
        ],
        "depth": 1,
        "scope": "class",
        "parent_id": "entity_0",
        "children_ids": [],
        "calls": [
          "Math.random.toString.substr",
          "Math.random.toString",
          "Math.random",
          "Date.now"
        ],
        "leading_comment": "/**\n   * Generate unique task identifier\n   * @private\n   * @returns {string} - Unique task ID\n   */",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_3",
        "name": "PriorityTaskQueue",
        "type": "class",
        "signature": "class PriorityTaskQueue",
        "line_range": [
          43,
          191
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [
          "entity_4",
          "entity_5",
          "entity_6",
          "entity_7",
          "entity_8",
          "entity_9",
          "entity_10",
          "entity_11",
          "entity_12"
        ],
        "calls": [],
        "leading_comment": null,
        "inline_comment": null,
        "trailing_comment": "/**\n   * Initialize task queue with concurrency limit\n   * @param {number} maxConcurrent - Maximum tasks running simultaneously\n   */",
        "docstring": null
      },
      {
        "id": "entity_4",
        "name": "constructor",
        "type": "method",
        "signature": "constructor(maxConcurrent = 3)",
        "line_range": [
          48,
          55
        ],
        "depth": 1,
        "scope": "class",
        "parent_id": "entity_3",
        "children_ids": [],
        "calls": [],
        "leading_comment": null,
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_5",
        "name": "enqueue",
        "type": "method",
        "signature": "enqueue(taskFunction, priority = PRIORITY_NORMAL, maxRetries = 3)",
        "line_range": [
          64,
          74
        ],
        "depth": 1,
        "scope": "class",
        "parent_id": "entity_3",
        "children_ids": [],
        "calls": [
          "this._processNextTask",
          "this._sortPendingTasksByPriority",
          "this.pendingTasks.push"
        ],
        "leading_comment": "/**\n   * Add a new task to the queue\n   * @param {Function} taskFunction - Async function to execute\n   * @param {number} priority - Task priority (lower number = higher priority)\n   * @param {number} maxRetries - Maximum retry attempts\n   * @returns {string} - Task ID for tracking\n   */",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_6",
        "name": "_sortPendingTasksByPriority",
        "type": "method",
        "signature": "_sortPendingTasksByPriority()",
        "line_range": [
          80,
          87
        ],
        "depth": 1,
        "scope": "class",
        "parent_id": "entity_3",
        "children_ids": [],
        "calls": [
          "this.pendingTasks.sort"
        ],
        "leading_comment": "/**\n   * Sort pending tasks by priority and creation time\n   * @private\n   */",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_7",
        "name": "_processNextTask",
        "type": "method",
        "signature": "_processNextTask()",
        "line_range": [
          93,
          106
        ],
        "depth": 1,
        "scope": "class",
        "parent_id": "entity_3",
        "children_ids": [],
        "calls": [
          "this._executeTask"
        ],
        "leading_comment": "/**\n   * Process tasks from queue respecting concurrency limit\n   * @private\n   */",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_8",
        "name": "_executeTask",
        "type": "method",
        "signature": "_executeTask(task)",
        "line_range": [
          113,
          137
        ],
        "depth": 1,
        "scope": "class",
        "parent_id": "entity_3",
        "children_ids": [],
        "calls": [
          "this._processNextTask",
          "this.failedTasks.push",
          "this._sortPendingTasksByPriority",
          "this.pendingTasks.unshift",
          "this.completedTasks.push"
        ],
        "leading_comment": "/**\n   * Execute a single task with error handling and retry logic\n   * @private\n   * @param {Task} task - Task to execute\n   */",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_9",
        "name": "getQueueStats",
        "type": "method",
        "signature": "getQueueStats()",
        "line_range": [
          143,
          152
        ],
        "depth": 1,
        "scope": "class",
        "parent_id": "entity_3",
        "children_ids": [],
        "calls": [],
        "leading_comment": "/**\n   * Get current queue statistics\n   * @returns {Object} - Queue status information\n   */",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_10",
        "name": "getTaskById",
        "type": "method",
        "signature": "getTaskById(taskId)",
        "line_range": [
          159,
          167
        ],
        "depth": 1,
        "scope": "class",
        "parent_id": "entity_3",
        "children_ids": [],
        "calls": [
          "allTasks.find"
        ],
        "leading_comment": "/**\n   * Get details of a specific task by ID\n   * @param {string} taskId - Task identifier\n   * @returns {Task|null} - Task object or null if not found\n   */",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_11",
        "name": "clearHistory",
        "type": "method",
        "signature": "clearHistory()",
        "line_range": [
          172,
          175
        ],
        "depth": 1,
        "scope": "class",
        "parent_id": "entity_3",
        "children_ids": [],
        "calls": [],
        "leading_comment": "/**\n   * Clear all completed and failed tasks from history\n   */",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_12",
        "name": "waitUntilEmpty",
        "type": "method",
        "signature": "waitUntilEmpty()",
        "line_range": [
          181,
          190
        ],
        "depth": 1,
        "scope": "class",
        "parent_id": "entity_3",
        "children_ids": [],
        "calls": [],
        "leading_comment": "/**\n   * Wait for all pending tasks to complete\n   * @returns {Promise<void>}\n   */",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_13",
        "name": "{ \n  PriorityTaskQueue, \n  Task,\n  PRIORITY_URGENT, \n  PRIORITY_HIGH, \n  PRIORITY_NORMAL, \n  PRIORITY_LOW \n}",
        "type": "export",
        "signature": "export { \n  PriorityTaskQueue, \n  Task,\n  PRIORITY_URGENT, \n  PRIORITY_HIGH, \n  PRIORITY_NORMAL, \n  PRIORITY_LOW \n};",
        "line_range": [
          194,
          201
        ],
        "depth": 0,
        "scope": "module",
        "parent_id": null,
        "children_ids": [
          "entity_14"
        ],
        "calls": [],
        "leading_comment": "// Export constants and classes",
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      },
      {
        "id": "entity_14",
        "name": "{ \n  PriorityTaskQueue, \n  Task,\n  PRIORITY_URGENT, \n  PRIORITY_HIGH, \n  PRIORITY_NORMAL, \n  PRIORITY_LOW \n}",
        "type": "export",
        "signature": "{ \n  PriorityTaskQueue, \n  Task,\n  PRIORITY_URGENT, \n  PRIORITY_HIGH, \n  PRIORITY_NORMAL, \n  PRIORITY_LOW \n}",
        "line_range": [
          194,
          201
        ],
        "depth": 1,
        "scope": "block",
        "parent_id": "entity_13",
        "children_ids": [],
        "calls": [],
        "leading_comment": null,
        "inline_comment": null,
        "trailing_comment": null,
        "docstring": null
      }
    ]
  }
}